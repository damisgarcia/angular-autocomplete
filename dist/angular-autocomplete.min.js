(function(){"use strict";var parseData,select2,setRemote;parseData=function(result,params,scope,filter){var data,filterResult;filterResult=filter("filter")(result,params.term);data=$.map(filterResult,function(item){var response;response={id:item[scope.id],text:item[scope.text],$object:item};if(!scope.hasOwnProperty("subtitle")){scope.subtitle="subtitle";scope.subtitleLabel=scope.subtitle}response.subtitle=item[scope.subtitle];response.subtitleLabel=scope.subtitle;if(scope.hasOwnProperty("picture")){response.picture=item[scope.picture]}return response});return data};setRemote=function(url,scope,filter){var remote;remote={url:url,dataType:"json",delay:250,data:function(params){return{q:params.term,page:params.page}},processResults:function(data,params){params.page=params.page||1;return{results:parseData(data,params,scope,filter),pagination:{more:params.page*30<data.total_count}}},cache:true};return remote};select2=function($filter){return{restrict:"A",scope:{ngModel:"=",select2:"=",optionId:"@",optionText:"@",optionSubText:"@"},link:function(scope,element,attrs){var options,templateResult,templateSelection,url;if(!scope.select2.hasOwnProperty("id")){scope.select2.id="id"}if(!scope.select2.hasOwnProperty("text")){scope.select2.text="text"}templateResult=function(item){if(!item.id){return item.text}if(!item.hasOwnProperty("subtitleLabel")){item.subtitleLabel=""}if(item.hasOwnProperty("subtitle")&&!item.hasOwnProperty("picture")){return $("<p>"+item.text+" <br> <small>"+item.subtitleLabel.toUpperCase()+" "+item.subtitle+"</small></p>")}else if(item.hasOwnProperty("picture")&&!item.hasOwnProperty("subtitle")){return $("<img src='"+item.picture+"' class='img-circle' width='45' style='display:inline;margin:0 15px;float:left;' /><p>"+item.text+"</p>")}else if(item.hasOwnProperty("picture")&&item.hasOwnProperty("subtitle")){return $("<img src='"+item.picture+"' class='img-circle' width='45' style='display:inline;margin:0 15px;float:left' /> <p>"+item.text+" <br> <small>"+item.subtitleLabel.toUpperCase()+" "+item.subtitle+"</small></p>")}else{return item.text}};templateSelection=function(item){scope.$object=item.$object;return item.text};element.on("select2:close",function(){scope.ngModel=scope.$object;return scope.$apply()});options={};if(scope.select2.hasOwnProperty("remote")){url=scope.select2.remote;options.ajax=setRemote(url,scope.select2,$filter)}else if(scope.select2.hasOwnProperty("local")){options.data=scope.select2.local}if(scope.select2.hasOwnProperty("theme")){options.theme=scope.select2.theme}if(scope.select2.hasOwnProperty("language")){options.language=scope.select2.language}if(attrs.hasOwnProperty("placeholder")){options.placeholder=attrs.placeholder}options.templateResult=templateResult;options.templateSelection=templateSelection;return $(element).select2(options)}}};angular.module("angular.autocomplete",[]).directive("select2",select2);select2.$inject=["$filter"]}).call(this);